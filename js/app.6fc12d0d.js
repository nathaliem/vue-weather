(function(t){function e(e){for(var a,i,c=e[0],s=e[1],u=e[2],h=0,f=[];h<c.length;h++)i=c[h],o[i]&&f.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-weather/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("c21b"),o=n.n(a);o.a},1:function(t,e){},"2fdc":function(t,e,n){},"3c81":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=n("28dd"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[""!==t.city?n("WeatherContent",{attrs:{city:t.city}}):t._e(),""===t.city?n("WeatherContent",[n("p",[t._v("Location data loading...")])]):t._e(),n("Search",{on:{getCity:t.setCity}})],1)},i=[],c=(n("6762"),n("2fdb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",style:t.style},[n("div",{staticClass:"content"},[t.weatherData&&t.city?n("WeatherData",{attrs:{data:t.weatherData,city:t.city}}):t._e(),t._t("default")],2)])}),s=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weatherdata"},[n("h1",[t._v(t._s(t.city))]),t.data.temp?n("h2",{attrs:{title:"data.description"}},[t._v(t._s(t.data.temp)+" "),n("span",[t._v("Â°C")])]):t._e()])},l=[],h=(n("a481"),{name:"WeatherData",props:{data:{type:Object},city:{type:String}},watch:{data:function(){this.data.temp=parseFloat(this.data.temp).toFixed(1).replace(".",",")}}}),f=h,p=(n("edc3"),n("2877")),d=Object(p["a"])(f,u,l,!1,null,"3b7ba920",null);d.options.__file="WeatherData.vue";var y=d.exports,g={flickr:{key:"b2935a1cd38d60268fa488d9566ee1d8",secret:"ee58d1c968a342ac"},openweathermap:{key:"d7c06f26ff7c9dc7d9ed7cc8fceb7955"},google:{key:"AIzaSyBVg_ba0bnWL2Nybl4GiKK0-EzELlwbvn4"}},m={name:"WeatherContent",components:{WeatherData:y},props:{city:String},data:function(){return{url:"",weatherData:{}}},watch:{city:function(){this.city&&this.getWeather()}},computed:{style:function(){return"background-image: url("+this.url+")"}},methods:{getWeather:function(){var t=this;this.$http.get("https://api.openweathermap.org/data/2.5/weather",{params:{q:this.city,APPID:g.openweathermap.key,units:"metric"}}).then(function(e){t.weatherData={description:e.body.weather[0].description,icon:e.body.weather[0].icon,temp:e.body.main.temp},t.loadCityImage(t.weatherData.description)}).catch(function(t){console.error(t)})},loadCityImage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$http.get("https://api.flickr.com/services/rest",{params:{method:"flickr.photos.search",api_key:g.flickr.key,text:this.city+" "+e,safe_search:1,content_type:1,media:"photos",per_page:50,format:"json",nojsoncallback:1,extras:"url_h",sort:"relevance"}}).then(function(e){var n=e.body.photos.photo.filter(function(t){return"undefined"!==typeof t.url_h});if(n.length>0){var a=Math.floor(Math.random()*Math.floor(n.length-1));t.url=n[a].url_h}else t.loadCityImage()}).catch(function(t){console.error(t)})}},beforeMount:function(){this.city&&this.getWeather()}},v=m,b=(n("c487"),Object(p["a"])(v,c,s,!1,null,"13b03575",null));b.options.__file="WeatherContent.vue";var _=b.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"searchform"},[t.showForm?n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("button",{attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleForm(e)}}},[t._v("Hide")]),n("input",{ref:"search",attrs:{type:"text",name:"search",id:"search",placeholder:"Search for your city",autofocus:""}}),n("input",{attrs:{type:"submit",value:"Search"}})]):t._e(),t.showForm?t._e():n("div",{staticClass:"searchform--toggle"},[n("button",{on:{click:t.toggleForm}},[t._v("Need a different location?")])])])},C=[],k=(n("386d"),{name:"Search",data:function(){return{city:"",showForm:!1}},methods:{onSubmit:function(){this.$emit("getCity",this.$refs.search.value)},toggleForm:function(){this.showForm=!this.showForm}}}),D=k,W=(n("6838"),Object(p["a"])(D,w,C,!1,null,"a654e736",null));W.options.__file="Search.vue";var j=W.exports,S={name:"app",data:function(){return{city:""}},components:{WeatherContent:_,Search:j},methods:{getGeoData:function(){"geolocation"in navigator?this.getDataWithGeo():this.getDataWithIP()},getDataWithGeo:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){t.$http.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{latlng:e.coords.latitude+","+e.coords.longitude,sensor:!0,language:"en",key:g.google.key}}).then(function(e){e.body.results&&e.body.results.some(function(e){if(e.types.includes("locality"))return t.setCity(e.address_components[0].long_name),!0})}).catch(function(t){console.error(t)})},function(){t.getDataWithIP()})},getDataWithIP:function(){var t=this;this.$http.get("https://ipapi.co/json").then(function(e){e.body&&""!==e.body.city&&t.setCity(e.body.city)}).catch(function(t){console.error(t)})},setCity:function(t){this.city=t}},beforeMount:function(){this.city||this.getGeoData()}},x=S,O=(n("034f"),Object(p["a"])(x,r,i,!1,null,null,null));O.options.__file="App.vue";var P=O.exports;a["a"].use(o["a"]),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(P)}}).$mount("#app")},6838:function(t,e,n){"use strict";var a=n("3c81"),o=n.n(a);o.a},8538:function(t,e,n){},c21b:function(t,e,n){},c487:function(t,e,n){"use strict";var a=n("8538"),o=n.n(a);o.a},edc3:function(t,e,n){"use strict";var a=n("2fdc"),o=n.n(a);o.a}});
//# sourceMappingURL=app.6fc12d0d.js.map